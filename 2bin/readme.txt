GeoImageConverter
v 0.4.0a

Copyright © 2017-2018 Александр (Sagrer) Гриднев
sagrer@yandex.ru

Сайт программы: http://personal.sagrer.ru/tracs/geoimgconv

Программа распространяется на условиях лицензии GNU GPL v3 или выше,
см. файл gpl.txt

Об условиях распространения используемых в программе библиотек - см.
файл libs_licenses.txt
Исходники данных библиотек помимо их собственных сайтов - должно быть
возможно загрузить и с сайта данной программы.
_______________________________________________________________

	GeoImageConverter - небольшая программка для причинения разнообразных
преобразований изображениям с геоданными, в данный момент - это файлы
формата GeoTIFF.
	Разнообразность преобразований разнообразием на данный момент также
не блещет и заключается в применении к изображениям медианного фильтра,
только и всего.	
_______________________________________________________________

	На данный момент программа - консольная, даже без curses-интерфейса.
Управлять ей можно исключительно через опции командной строки. Поэтому для
упрощения - в комплект с исполнимым дистрибутивом добавлено несколько bat-скриптов,
их внутренности можно изменять для изменения настроек и сразу запускать.

	Какие есть bat-файлы:
	
	* help.bat - вывести справку по опциям командной строки.
	* simplerun101.bat - запустить преобразование файла input.tif в файл output.tif с
параметрами фильтра по умолчанию и окном 101.
	* simplerun201.bat - запустить преобразование файла input.tif в файл output.tif с
параметрами фильтра по умолчанию и окном 201.
	* huangrun101.bat - запустить преобразование файла input.tif в файл output.tif 
медианным фильтром по алгоритму Хуанга с параметрами фильтра по умолчанию и окном 101.
	* huangrun201.bat - запустить преобразование файла input.tif в файл output.tif 
медианным фильтром по алгоритму Хуанга с параметрами фильтра по умолчанию и окном 201.
	* huangrun301.bat - запустить преобразование файла input.tif в файл output.tif 
медианным фильтром по алгоритму Хуанга с параметрами фильтра по умолчанию и окном 301.
	* editable_run.bat - именно этот файл рекомендуется редактировать для изменения
параметров фильтра. Что означают опции командной строки - написано в комментариях
в начале скрипта. Для редактирования рекомендую использовать редактор Notepad++.
https://notepad-plus-plus.org/
_______________________________________________________________

	А теперь подробнее об опциях командной строки, которые принимает программа. Просто
скопирую текст справки, которая выдаётся по опции -h:

Способ вызова:
geoimgconv [опции] [имя входящего файла] [имя исходящего файла]

По умолчанию (если вызвать без опций) - входящим файлом будет input.tif, а
исходящим output.tif.

Программа обрабатывает входящий файл медианным фильтром и, сохраняя метаданные
- записывает то что получилось в исходящий файл.

Опции командной строки:
  -h [ --help ]               Вывести справку по опциям (ту, которую Вы сейчас
                              читаете).
  -?                          То же, что и -h
  -v [ --version ]            Вывести информацию о версии программы и не
                              выполнять никаких других действий.
  --medfilter.aperture arg    Длина стороны окна медианного фильтра в пикселях.
                              Округляется вверх до ближайшего нечетного
                              значения. По умолчанию равна 101 пикс.
  --medfilter.threshold arg   Порог медианного фильтра в метрах. Если отличие
                              значения пикселя от медианы не превышает этого
                              значение - пиксель при фильтрации не изменяется.
                              По умолчанию опция равна 0.5 (метров).
  --medfilter.margintype arg  Тип заполнения краевых областей для медианного
                              фильтра. Заполнение нужно для того, чтобы
                              пикселы, находящиеся по краям значимой части
                              изображения также можно было обработать фильтром,
                              т.е. чтобы в окне вокруг этого пикселя были
                              незначимые пиксели, похожие на обычные значимые
                              (в частности, не сильно отличающиеся по высоте).
                              Возможные варианты заполнения:
                                  simple - требующая заполнения область
                              заполняется копией краевого пикселя. Работает
                              быстро, но создаёт холмы если копируемый пиксель
                              сильно отличается по своей высоте от окружающих.
                                  mirror - краевые области заполняются
                              зеркальным отражением изображения, расположенного
                              в противоположную сторону от краевого пикселя.
                              Работает медленно, но при достаточном размере
                              окна позволяет например избежать появления холмов
                              на месте леса при фильтрации.
  --medfilter.algo arg        Алгоритм медианного фильтра. Возможные варианты:
                                  stub - пустой алгоритм. Ничего не делает,
                              исходный файл просто копируется.
                                  stupid - алгоритм, обрабатывающий изображение
                              "в лоб", т.е. на каждой итерации берутся все
                              пиксели апертуры, сортируются, берётся медиана.
                              Этот алгоритм работает медленно, но медиана
                              вычисляется без вызванной к примеру квантованием
                              по уровням потери точности. Это вариант по
                              умолчанию (т.е применяется если опция не была
                              указана).
                                  huang - алгоритм быстрой медианной
                              фильтрации, предложенный Хуангом и соавторами.
                              Реализован с незначительными модификациями,
                              призванными немного ускорить обработку "неровных"
                              изображений. Работает значительно быстрее чем
                              обработка изображения "в лоб", т.к на каждом
                              следующем пикселе используется часть информации,
                              полученной при обработке предыдущего.
  --medfilter.huanglevels arg Количество уровней квантования для медианной
                              фильтрации алгоритмом Хуанга. По умолчанию этот
                              параметр равен 10000. Максимально возможное
                              значение этого параметра: 65535.
  --medfilter.fillpits        Включить заполнение ям в медианном фильтре. Смысл
                              в том, что если точка рельефа находится
                              значительно ниже медианы, то при данной
                              включённой опции данная точка станет равна
                              медиане, но обычно это не имеет смысла т.к.
                              алгоритм обычно применяется для срезания с карты
                              высот растительности и различного техногена, а
                              вовсе не для заполнения ям и оврагов. По
                              умолчанию эта опция отключена в отличие от
                              предыдущих версий (в которых этой опции не было).
  --memmode arg               Режим использования памяти. Позволяет ограничить
                              количество памяти, которое программа может
                              использовать для загрузки обрабатываемого
                              изображения. Если изображение не поместится в эту
                              ограниченную область целиком то оно будет
                              обрабатываться по частям. Возможно указать один
                              из следующих режимов:
                                  auto - оставить решение о режиме работы с
                              памятью на усмотрение программы;
                                  limit - явно задать максимальное количество
                              используемой памяти в байтах. Сразу после имени
                              режима без пробела нужно указать это количество.
                              Буквы k, m, g, t после числа (без пробела)
                              означают соответственно килобайты, мегабайты,
                              гигабайты и терабайты. Размер в байтах
                              указывается без буквы или буквой b;
                                  stayfree - явно задать количество памяти в
                              ОЗУ (т.е. сколько есть физически в компьютере,
                              без учёта "подкачки"!), которое должно остаться
                              свободным в момент начала работы над
                              изображением. Размер указывается без пробела
                              сразу за именем режима, точно так же как и для
                              режима limit;
                                  limit_free_prc - задать количество памяти в
                              процентах от свободного ОЗУ в момент начала
                              работы. Сразу после имени режима без пробела
                              должно быть указано целое число от 0 до 100;
                                  limit_full_prc - задать количество памяти в
                              процентах от общего количества ОЗУ. Сразу после
                              имени режима без пробела должно быть указано
                              целое число от 0 до 100;
                                  onechunk - заставить программу попытаться
                              обработать изображение одним куском, загрузив её
                              в память сразу целиком.
                                  По умолчанию (если не указано) используется
                              режим auto.
_______________________________________________________________

	Данная версия собрана со следующими библиотеками:
	
	* Из пакетов MSYS2 https://sourceforge.net/projects/msys2/files/REPOS/MINGW/Sources/
		* libgcc_s_seh-1 и libstdc++-6 из комплекта MinGW v7.3.0-1.
		* libwinpthread-1 v.git-6.0.0.5098.2464b7e6-1.
	* Прочее:
		* boost v. 1.66. http://www.boost.org/
		* gdal v. 2.2.3. http://www.gdal.org/
		* libiconv v. 1.15. https://www.gnu.org/software/libiconv/
_______________________________________________________________
This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.
	
(Это свободная программа: вы можете перераспространять ее и/или изменять
   ее на условиях Стандартной общественной лицензии GNU в том виде, в каком
   она была опубликована Фондом свободного программного обеспечения; либо
   версии 3 лицензии, либо (по вашему выбору) любой более поздней версии.

   Эта программа распространяется в надежде, что она будет полезной,
   но БЕЗО ВСЯКИХ ГАРАНТИЙ; даже без неявной гарантии ТОВАРНОГО ВИДА
   или ПРИГОДНОСТИ ДЛЯ ОПРЕДЕЛЕННЫХ ЦЕЛЕЙ. Подробнее см. в Стандартной
   общественной лицензии GNU.

   Вы должны были получить копию Стандартной общественной лицензии GNU
   вместе с этой программой. Если это не так, см.
   <http://www.gnu.org/licenses/>.)
_______________________________________________________________
